branches:
  only:
    - source
language: node_js
node_js:
  - "0.10"
before_install:
  - npm install -g hexo
  - git clone https://$GIT_NAME:$GH_TOKEN@github.com/$GIT_NAME/6leaf.github.io.git --branch=source branch_source
  - git clone https://$GIT_NAME:$GH_TOKEN@github.com/$GIT_NAME/6leaf.github.io.git --branch=master branch_master
  - cd branch_source
install:
  - npm install
script:
  - hexo generate
after_success:
  - ls -la
  - cp -r public/* ../branch_master
  - cd branch_master
  - git config --global push.default simple
  - git config --global user.name '6leaf'
  - git config --global user.email luzky12@gmail.com
  - git add -A
  - git commit -m 'update'
  - git push https://$GIT_NAME:$GH_TOKEN@github.com/$GIT_NAME/6leaf.github.io.git HEAD:master
  
env:
  global:
    secure: M4D6MYqCS7fJa4sD/owiCJKojHGsOmNYdfnGyKgzCEiajqjmcGk4TbW8TNojF5YIjNktVg2qrJqzhq3SmPQ16ris+BlAfulS80wA8JYKZ/FhMoMCXi/fNrU1X5YiiUvpCpswbpJh5GfLHLM6izjUWgwMHFjQpifDgwZ/j47Is88=
